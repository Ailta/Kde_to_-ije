<!doctype html>
<html lang="cs" style="max-height: 100vh; max-width: 100vw">
    <head style="flex: none">
        <%- include('partials/head'); %>
		<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
		<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    </head>
    <body style="display: flex; flex-direction: column; height: 100vh">
        <%- include('partials/header'); %>
        <div id="map" style="height: 100%;"></div>
		<script>
			const map = L.map('map').setView([50, 15], 6); // Set initial view

			L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
				maxZoom: 19,
			}).addTo(map);

			function onEachFeature(feature, layer) {
				// Bind a popup with properties from the GeoJSON
				if (feature.properties && feature.properties.popupContent) {
					layer.bindPopup(feature.properties.popupContent);
				}

				// Add click event handling
				layer.on('click', function(e) {
					alert("You clicked on: " + feature.properties.name);
					// You can perform other actions here as needed
				});
			}

			// Load your GeoJSON data
			fetch('https://services6.arcgis.com/ogJAiK65nXL1mXAW/arcgis/rest/services/Kina/FeatureServer/0/query?outFields=*&where=1%3D1&f=geojson')
				.then(response => response.json())
				.then(data => {
					// Create a GeoJSON layer and add it to the map with event handling
					L.geoJSON(data, {
						onEachFeature: onEachFeature
					}).addTo(map);
				})
				.catch(err => console.error('Error loading GeoJSON:', err));
		</script>
    </body>
</html>
